<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>íŠ¸ë¦½ë‹·ì»´ ë¦¬ë·° ì‘ì„±ê¸°</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body class="bg-slate-50 text-slate-800">
<div id="root"></div>

<script type="text/babel">
const { useEffect, useState } = React;

const Icon = ({ name, size = 18, className = "" }) => {
    useEffect(() => { if (window.lucide) lucide.createIcons(); }, []);
    return <i data-lucide={name} style={{ width: size, height: size }} className={className}></i>;
};

const EMOJIS = ["ğŸŒ¿", "ğŸ¡", "ğŸï¸", "ğŸ›ï¸", "âœ¨", "ğŸ ", "ğŸŒ™", "ğŸ–ï¸"];
const TITLE_POOL = [
    "ë™ì„ ì´ í¸í•œ í•˜ë£¨ ì½”ìŠ¤",
    "ì‚¬ì§„ êµ¬ê°„ì´ ë§ì€ í¬ì¸íŠ¸",
    "ì¬ë°©ë¬¸í•˜ê¸° ì¢‹ì€ êµ¬ì„±",
    "ì•¼ê²½ê¹Œì§€ ì±™ê¸°ê¸° ì¢‹ì€ ì½”ìŠ¤",
    "ê°€ì„±ë¹„ê°€ ì¢‹ì€ ì¼ì •",
    "ê°€ì¡± ì—¬í–‰ì— ë§ëŠ” ì„ íƒ",
    "ê¸°ëŒ€ ì´ìƒìœ¼ë¡œ ê¹”ë”í•œ ë™ì„ ",
    "ë¹„ ì˜¤ëŠ” ë‚ ë„ ê´œì°®ì€ ì½”ìŠ¤",
    "ì£¼ë§ ì¼ì •ìœ¼ë¡œ ë”± ë§ëŠ” ê³³",
    "ì‹¤ì† ìˆê²Œ ì¦ê¸°ëŠ” ì½”ìŠ¤"
];

const TIP_MAP = {
    "ë¡¯ë°ì›”ë“œ": ["ì˜¤ì „ ê°œì¥ ì§í›„ ì‹¤ë‚´ ì¸ê¸° ì–´íŠ¸ë™ì…˜ë¶€í„° ì´ë™í•˜ë©´ ëŒ€ê¸° ì‹œê°„ì´ ì§§ì•„ìš”", "í¼ë ˆì´ë“œ ì‹œê°„ 20ë¶„ ì „ì— ë©”ì¸ ë™ì„  ìë¦¬ ì¡ìœ¼ë©´ ë™ì„  ë‚­ë¹„ê°€ ì¤„ì–´ìš”"],
    "ì ì‹¤": ["ì£¼ë§ ì €ë…ì€ ì£¼ë³€ ë„ë¡œê°€ í˜¼ì¡í•˜ë‹ˆ ì§€í•˜ì²  ì´ë™ì´ í¸í•´ìš”", "ì„ì´Œí˜¸ìˆ˜ ì•¼ê°„ ì‚°ì±…ì€ í•´ ì§„ ë’¤ 30ë¶„ì´ ê°€ì¥ ì—¬ìœ ë¡œì›Œìš”"],
    "ì œì£¼": ["ë Œí„°ì¹´ ì¸ìˆ˜ëŠ” ì˜¤ì „ ì´ë¥¸ ì‹œê°„ëŒ€ê°€ ëŒ€ê¸° ì¤„ì´ ì§§ì•„ìš”", "í•´ì•ˆ ì½”ìŠ¤ëŠ” ë°”ëŒì´ ê°•í•˜ë‹ˆ ì–‡ì€ ê²‰ì˜·ì„ ì±™ê¸°ë©´ ì¢‹ì•„ìš”"],
    "ì—¬ìˆ˜": ["í•´ ì§ˆ ë¬´ë µ ì…ì¥í•˜ë©´ ë‚® í’ê²½ê³¼ ì•¼ê°„ ì¡°ëª…ì„ ëª¨ë‘ ë³¼ ìˆ˜ ìˆì–´ìš”", "ì£¼ì°¨ì¥ì€ ì¶œêµ¬ ê°€ê¹Œìš´ êµ¬ì—­ë³´ë‹¤ ì•ˆìª½ì´ íšŒì°¨ê°€ ë¹¨ë¼ìš”"],
    "í•˜ë™": ["ì£¼ë§ ì¥í„° ë°©ë¬¸ì€ ì˜¤ì „ ì‹œê°„ëŒ€ê°€ ê°€ì¥ ì—¬ìœ ë¡œì›Œìš”", "ê°•ë³€ ì‚°ì±… ì½”ìŠ¤ëŠ” í•´ ì§ˆ ë¬´ë µ ë°”ëŒì´ ì„ ì„ í•´ì„œ ê±·ê¸° ì¢‹ì•„ìš”"],
    "êµ¬ë¡€": ["ì‚°ì±… ì½”ìŠ¤ëŠ” ì•„ì¹¨ 9ì‹œ ì „í›„ê°€ ê°€ì¥ í•œì í•´ìš”", "ì§€ì—­ ì‹ë‹¹ì€ ë¸Œë ˆì´í¬íƒ€ì„ì´ ìˆëŠ” ê³³ì´ ë§ì•„ ë°©ë¬¸ ì „ í™•ì¸ì´ ì¢‹ì•„ìš”"]
};

const locationKeywords = [
    { region: "ì„œìš¸", words: ["ì„œìš¸", "ì ì‹¤", "í™ëŒ€", "ëª…ë™", "ê°•ë‚¨", "ë¡¯ë°ì›”ë“œ", "ì—¬ì˜ë„", "ì„±ìˆ˜"] },
    { region: "ê²½ê¸°ë„", words: ["ìˆ˜ì›", "ìš©ì¸", "ê°€í‰", "íŒŒì£¼", "ì–‘í‰", "í™”ì„±", "ë‚¨ì–‘ì£¼", "ê³ ì–‘", "ê²½ê¸°"] },
    { region: "ê°•ì›ë„", words: ["ê°•ë¦‰", "ì†ì´ˆ", "ì¶˜ì²œ", "ì›ì£¼", "í‰ì°½", "ê°•ì›"] },
    { region: "ì¶©ì²­ë„", words: ["ëŒ€ì „", "ì²œì•ˆ", "ê³µì£¼", "ë³´ë ¹", "ì„œì‚°", "ì²­ì£¼", "ì¶©ì£¼", "ì¶©ì²­"] },
    { region: "ì „ë¼ë„", words: ["ì „ì£¼", "ì—¬ìˆ˜", "ìˆœì²œ", "ëª©í¬", "êµ¬ë¡€", "ë‹´ì–‘", "êµ°ì‚°", "ê´‘ì£¼", "ì „ë¼"] },
    { region: "ê²½ìƒë„", words: ["ë¶€ì‚°", "ê²½ì£¼", "í•˜ë™", "í†µì˜", "ê±°ì œ", "í¬í•­", "ëŒ€êµ¬", "ìš¸ì‚°", "ê²½ìƒ"] },
    { region: "ì œì£¼ë„", words: ["ì œì£¼", "ì„œê·€í¬", "ì• ì›”", "ìš°ë„"] }
];

const inferRegion = (place) => {
    const normalized = place.trim();
    for (const group of locationKeywords) {
        if (group.words.some((word) => normalized.includes(word))) return group.region;
    }
    if (/[êµ°ìë©´]$/.test(normalized)) return "ì „ë¼ë„";
    if (/ì‹œ$/.test(normalized)) return "ê²½ê¸°ë„";
    return "ê¸°íƒ€";
};

const parseInput = (text) => {
    const trimmed = text.trim();
    const match = trimmed.match(/ã…(\d+)?$/);
    if (!match) return { place: trimmed, count: 1, alt: false };
    const count = match[1] ? Math.max(1, Number(match[1])) : 1;
    return {
        place: trimmed.replace(/ã…\d*$/, "").trim(),
        count,
        alt: true
    };
};

const shuffle = (arr) => {
    const copy = [...arr];
    for (let i = copy.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [copy[i], copy[j]] = [copy[j], copy[i]];
    }
    return copy;
};

const chooseTips = (place) => {
    const baseTips = ["ì˜¤ì „ ì˜¤í”ˆ ì‹œê°„ëŒ€ì— ë§ì¶”ë©´ ëŒ€ê¸° ì‹œê°„ ì¤„ì´ê¸° ì‰¬ì›Œìš”", "ì¸ê¸° êµ¬ê°„ì€ ì…êµ¬ë³´ë‹¤ ì•ˆìª½ë¶€í„° ë¨¼ì € ë³´ë©´ ì´ë™ì´ íš¨ìœ¨ì ì´ì—ìš”", "ì£¼ë§ì€ ì ì‹¬ ì§í›„ë³´ë‹¤ ì´ë¥¸ ì˜¤í›„ê°€ ì²´ê° ëŒ€ê¸° ì‹œê°„ì´ ì§§ì•„ìš”", "ëŒì•„ê°€ëŠ” ê¸¸ êµí†µì´ ë§‰íˆê¸° ì „ 30ë¶„ ì¼ì° ì´ë™í•˜ë©´ í”¼ë¡œê°€ ì¤„ì–´ìš”"];
    for (const key of Object.keys(TIP_MAP)) {
        if (place.includes(key)) return shuffle(TIP_MAP[key]).slice(0, 2);
    }
    return shuffle(baseTips).slice(0, 2);
};

const clampLength = (text, min = 400, max = 500) => {
    const fillers = [
        " ì´ë™ íë¦„ì´ ë‹¨ìˆœí•´ì„œ ì´ˆí–‰ ë°©ë¬¸ë„ ë¶€ë‹´ì´ ì ì—ˆê³  ì‹ì‚¬ì™€ íœ´ì‹ êµ¬ê°„ì„ ë‚˜ëˆ„ê¸° í¸í–ˆì–´ìš”.",
        " ì²´ë¥˜ ì‹œê°„ì´ ê¸¸ì–´ì ¸ë„ ì§€ë£¨í•˜ì§€ ì•Šì•˜ê³  ì´ë™ ê°„ê²©ì´ ë¬´ë¦¬í•˜ì§€ ì•Šì•„ ì „ì²´ ì¼ì •ì´ ì•ˆì •ì ì´ì—ˆì–´ìš”.",
        " í˜„ì¥ ë™ì„ ì´ ëª…í™•í•´ì„œ ê³„íšì„ ë§ì´ ì„¸ìš°ì§€ ì•Šì•„ë„ í•µì‹¬ êµ¬ê°„ì„ ë†“ì¹˜ì§€ ì•Šê¸° ì¢‹ì•˜ì–´ìš”."
    ];
    let result = text;
    while (result.length < min) {
        result += fillers[Math.floor(Math.random() * fillers.length)];
    }
    if (result.length > max) result = result.slice(0, max - 1) + ".";
    return result;
};

const BODY_PARTS = {
    default: {
        intro: [
            "{place}ì€ ì£¼ìš” í¬ì¸íŠ¸ê°€ í•œ ë°©í–¥ìœ¼ë¡œ ì´ì–´ì ¸ì„œ ì²˜ìŒ ê°€ë„ ì¼ì •ì´ ê¹”ë”í•˜ê²Œ ì •ë¦¬ëì–´ìš”.",
            "{place}ì€ ì…ì¥ í›„ ë™ì„ ì´ ë‹¨ìˆœí•´ì„œ ì´ë™ì— ì—ë„ˆì§€ë¥¼ ë§ì´ ì“°ì§€ ì•Šì•„ë„ ëì–´ìš”.",
            "{place}ì€ ê³µê°„ ê°„ê²©ì´ ë‹µë‹µí•˜ì§€ ì•Šì•„ì„œ ì§§ì€ ì¼ì •ì—ë„ í•µì‹¬ ì½”ìŠ¤ë¥¼ í¸í•˜ê²Œ ë‹´ê¸° ì¢‹ì•˜ì–´ìš”."
        ],
        middle: [
            "í˜„ì¥ ì•ˆë‚´ê°€ ë¶„ëª…í•´ì„œ ì–´ë””ì„œ ì‰¬ê³  ì–´ë””ì„œ ì˜¤ë˜ ë³¼ì§€ ë¹ ë¥´ê²Œ íŒë‹¨í•  ìˆ˜ ìˆì—ˆì–´ìš”.",
            "í”¼í¬ ì‹œê°„ë§Œ í”¼í•´ ì›€ì§ì´ë©´ ëŒ€ê¸° ì²´ê°ì´ í¬ê²Œ ì¤„ì–´ì„œ ì‹¤ì œ ì²´ë¥˜ ë§Œì¡±ë„ê°€ ë†’ì•˜ì–´ìš”.",
            "ì£¼ìš” êµ¬ê°„ì´ ëŠê¸°ì§€ ì•Šì•„ íë¦„ì´ ìì—°ìŠ¤ëŸ½ê³  ì‚¬ì§„ í¬ì¸íŠ¸ë„ ê³¼í•˜ì§€ ì•Šê²Œ ì´ì–´ì¡Œì–´ìš”."
        ],
        outro: [
            "ì „ì²´ì ìœ¼ë¡œ {place}ì€ ì¤€ë¹„ë¥¼ ë§ì´ í•˜ì§€ ì•Šì•„ë„ ì™„ì„±ë„ ìˆëŠ” í•˜ë£¨ë¥¼ ë§Œë“¤ê¸° ì¢‹ì€ ì½”ìŠ¤ì˜€ì–´ìš”.",
            "ì •ë¦¬í•˜ë©´ {place}ì€ ë™í–‰ ì·¨í–¥ì´ ë‹¬ë¼ë„ ë¬´ë‚œí•˜ê²Œ ë§Œì¡±í•˜ê¸° ì¢‹ì€ ì¼ì •í˜• ì¥ì†Œì˜€ì–´ìš”.",
            "ê²°ë¡ ì ìœ¼ë¡œ {place}ì€ ì¬ë°©ë¬¸ ë•Œ ë‹¤ë¥¸ ë™ì„ ìœ¼ë¡œ í™•ì¥í•˜ê¸° ì‰¬ìš´ êµ¬ì¡°ë¼ í™œìš©ë„ê°€ ë†’ì•˜ì–´ìš”."
        ]
    },
    alt: {
        intro: [
            "{place}ì€ í•µì‹¬ í¬ì¸íŠ¸ ì§‘ì¤‘í˜•ìœ¼ë¡œ ì¦ê¸°ê¸° ì¢‹ì•„ì„œ ì§§ì€ ë°©ë¬¸ì—ë„ ë°€ë„ ìˆê²Œ ë³¼ ìˆ˜ ìˆì—ˆì–´ìš”.",
            "{place}ì€ ì‹œê°„ëŒ€ë¥¼ ì˜ ê³ ë¥´ë©´ ì²´ê° ë‚œë„ê°€ í™• ë‚´ë ¤ê°€ì„œ ì²« ë°©ë¬¸ìì—ê²Œë„ ë¶€ë‹´ì´ ì ì—ˆì–´ìš”.",
            "{place}ì€ êµ¬ê°„ë³„ ë¶„ìœ„ê¸° ì°¨ì´ê°€ í™•ì‹¤í•´ì„œ ê°™ì€ ë‚  ì•ˆì—ì„œë„ ë‹¤ë¥¸ ëŠë‚Œìœ¼ë¡œ ì¦ê¸°ê¸° ì¢‹ì•˜ì–´ìš”."
        ],
        middle: [
            "ì…êµ¬ë³´ë‹¤ ì•ˆìª½ë¶€í„° ë¨¼ì € ë³´ë©´ í˜¼ì¡ êµ¬ê°„ì„ í”¼í•˜ê¸° ì‰¬ì›Œì„œ ì²´ë ¥ ì†Œëª¨ê°€ í¬ê²Œ ì¤„ì—ˆì–´ìš”.",
            "í¸ì˜ì‹œì„¤ ì ‘ê·¼ì´ ì¢‹ì•„ì„œ ì‰¬ëŠ” íƒ€ì´ë°ì„ ì¡ê¸° ì¢‹ê³  ì¼ì • ë¦¬ë“¬ì´ ëŠê¸°ì§€ ì•Šì•˜ì–´ìš”.",
            "ì—¬ëŸ¬ í¬ì¸íŠ¸ë¥¼ ë¬´ë¦¬í•´ì„œ ë‹´ê¸°ë³´ë‹¤ ì¤‘ì‹¬ ì½”ìŠ¤ë¥¼ ê¸¸ê²Œ ë³´ëŠ” ë°©ì‹ì´ ë§Œì¡±ë„ê°€ ë” ë†’ì•˜ì–´ìš”."
        ],
        outro: [
            "ì´í‰í•˜ë©´ {place}ì€ ê³¼í•˜ê²Œ ë¹¡ë¹¡í•˜ì§€ ì•Šì€ ì¼ì •ìœ¼ë¡œë„ ê²°ê³¼ê°€ ì¢‹ì€ ì‹¤ì†í˜• ì„ íƒì´ì—ˆì–´ìš”.",
            "í•œ ë²ˆì— ì „ë¶€ ë³´ë ¤ í•˜ì§€ ì•Šì•„ë„ {place}ì˜ ê°•ì ì„ ì¶©ë¶„íˆ ëŠë‚„ ìˆ˜ ìˆì–´ì„œ ì¬ë°©ë¬¸ ê³„íšì´ ì‰¬ì› ì–´ìš”.",
            "ì „ì²´ íë¦„ì´ ì•ˆì •ì ì´ë¼ {place}ì€ ì£¼ë§ ì¼ì •ì—ì„œë„ ì‹œê°„ ê´€ë¦¬ê°€ í¸í•œ í¸ì´ì—ˆì–´ìš”."
        ]
    }
};

const makeBody = (place, variantType) => {
    const set = BODY_PARTS[variantType];
    const intro = shuffle(set.intro)[0].replaceAll('{place}', place);
    const middle = shuffle(set.middle)[0].replaceAll('{place}', place);
    const outro = shuffle(set.outro)[0].replaceAll('{place}', place);
    const detailA = shuffle([
        `${place} ì£¼ë³€ì€ ì‹ì‚¬ì™€ ì¹´í˜ ì„ íƒ í­ì´ ë„“ì–´ì„œ ì´ë™ ë™ì„ ì„ ì§§ê²Œ ìœ ì§€í•˜ê¸° ì¢‹ì•˜ì–´ìš”.`,
        `${place}ì€ êµ¬ê°„ ì „í™˜ì´ ë¹ ë¥¸ í¸ì´ë¼ ë™í–‰ê³¼ ì†ë„ê°€ ë‹¬ë¼ë„ í•©ë¥˜ê°€ ì‰¬ì› ì–´ìš”.`,
        `${place}ì€ ì•¼ì™¸ì™€ ì‹¤ë‚´ í¬ì¸íŠ¸ ê· í˜•ì´ ì¢‹ì•„ ë‚ ì”¨ ë³€ìˆ˜ì—ë„ ëŒ€ì‘ì´ í¸í–ˆì–´ìš”.`
    ])[0];
    const detailB = shuffle([
        `íŠ¹íˆ ë¨¸ë¬´ëŠ” ì‹œê°„ì„ ê¸¸ê²Œ ì¡ì„ êµ¬ê°„ê³¼ ë¹ ë¥´ê²Œ ì§€ë‚˜ê°ˆ êµ¬ê°„ì´ ëª…í™•í•´ì„œ ê³„íš ìˆ˜ì •ì´ ì‰¬ì› ì–´ìš”.`,
        `ë¬´ë¦¬í•˜ê²Œ ë§ì€ ì½”ìŠ¤ë¥¼ ë„£ì§€ ì•Šì•„ë„ í•µì‹¬ ê²½í—˜ì„ ì±™ê¸¸ ìˆ˜ ìˆì–´ì„œ ì¼ì • í”¼ë¡œê°€ ëœí–ˆì–´ìš”.`,
        `í˜„ì¥ ë¶„ìœ„ê¸°ê°€ ê³¼ì¥ë˜ì§€ ì•Šì•„ ì‚¬ì§„ë„ ìì—°ìŠ¤ëŸ½ê²Œ ì •ë¦¬ë˜ê³  ì´ë™ í…œí¬ë„ ì•ˆì •ì ì´ì—ˆì–´ìš”.`
    ])[0];

    return clampLength(`${intro} ${detailA}

${middle} ${detailB}

${outro}`);
};

const createReviews = (place, count, alt) => {
    const reviews = [];
    const titleOrder = shuffle(TITLE_POOL);
    const emojiOrder = shuffle(EMOJIS);

    for (let i = 0; i < count; i++) {
        const style = alt ? (i % 2 === 0 ? 'alt' : 'default') : (Math.random() > 0.5 ? 'default' : 'alt');
        const titleCore = titleOrder[i % titleOrder.length];
        reviews.push({
            title: `${emojiOrder[i % emojiOrder.length]} ${titleCore}`,
            body: makeBody(place, style),
            tips: chooseTips(place)
        });
    }
    return reviews;
};

function App() {
    const [activeTab, setActiveTab] = useState("generate");
    const [inputText, setInputText] = useState("");
    const [currentResult, setCurrentResult] = useState(null);
    const [history, setHistory] = useState([]);
    const [error, setError] = useState("");
    const [toastMessage, setToastMessage] = useState("");

    useEffect(() => {
        const saved = localStorage.getItem("trip_reviews_v2");
        if (saved) setHistory(JSON.parse(saved));
    }, []);

    useEffect(() => {
        localStorage.setItem("trip_reviews_v2", JSON.stringify(history));
        if (window.lucide) lucide.createIcons();
    }, [history, activeTab]);

    const showToast = (message) => {
        setToastMessage(message);
        setTimeout(() => setToastMessage(""), 2000);
    };

    const handleGenerate = (event) => {
        event.preventDefault();
        setError("");

        const { place, count, alt } = parseInput(inputText);
        if (!place) {
            setError("ì¥ì†Œë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš”.");
            return;
        }

        const category = inferRegion(place);
        const reviews = createReviews(place, count, alt);

        const item = {
            id: Date.now().toString(),
            place,
            category,
            date: new Date().toLocaleString(),
            reviews
        };

        setCurrentResult(item);
        setHistory((prev) => [item, ...prev]);
        setInputText("");
        setActiveTab("generate");
    };

    const composeReviewText = (review) => `${review.title}\n\n${review.body}\n\nğŸ’«íŒ\n${review.tips.map((tip) => `Â· ${tip}`).join("\n")}`;

    const copyToClipboard = async (review) => {
        try {
            await navigator.clipboard.writeText(composeReviewText(review));
            showToast("ë³µì‚¬ ì™„ë£Œ");
        } catch {
            setError("ë³µì‚¬ì— ì‹¤íŒ¨í–ˆì–´ìš”. ì§ì ‘ ë³µì‚¬í•´ ì£¼ì„¸ìš”.");
        }
    };

    return (
        <div className="max-w-4xl mx-auto px-4 py-8 md:py-10">
            {toastMessage && <div className="fixed top-5 left-1/2 -translate-x-1/2 rounded-full bg-slate-800 text-white px-5 py-2 text-sm z-50">{toastMessage}</div>}

            <div className="mb-7">
                <h1 className="text-2xl md:text-3xl font-bold tracking-tight">íŠ¸ë¦½ë‹·ì»´ ë¦¬ë·° ë„ì¶œê¸°</h1>
                <p className="text-sm text-slate-500 mt-2">ì¥ì†Œ ì…ë ¥ í›„ ì—”í„°ë¡œ ìƒì„±í•˜ì„¸ìš”. ã… ë˜ëŠ” ã…2ì²˜ëŸ¼ ì…ë ¥í•˜ë©´ ë‹¤ë¥¸ ëŠë‚Œ ë²„ì „ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤.</p>
            </div>

            <div className="flex gap-2 mb-6 bg-slate-200 rounded-xl p-1 w-fit">
                <button onClick={() => setActiveTab("generate")} className={`px-4 py-2 rounded-lg text-sm font-semibold ${activeTab === "generate" ? "bg-white text-blue-600" : "text-slate-600"}`}>ìƒì„±</button>
                <button onClick={() => setActiveTab("history")} className={`px-4 py-2 rounded-lg text-sm font-semibold ${activeTab === "history" ? "bg-white text-blue-600" : "text-slate-600"}`}>ê¸°ë¡ {history.length}</button>
            </div>

            {activeTab === "generate" ? (
                <>
                    <form onSubmit={handleGenerate} className="bg-white border rounded-2xl p-5 shadow-sm">
                        <label className="block text-sm font-semibold mb-2">ì¥ì†Œ ì…ë ¥</label>
                        <div className="relative">
                            <input
                                value={inputText}
                                onChange={(e) => setInputText(e.target.value)}
                                placeholder="ì˜ˆ: ì—¬ìˆ˜ ë¼í…Œë¼ìŠ¤ ã…2"
                                className="w-full h-12 rounded-xl border px-4 pr-14 outline-none focus:ring-2 focus:ring-blue-200 focus:border-blue-500"
                            />
                            <button type="submit" className="absolute right-2 top-2 h-8 w-10 rounded-lg bg-blue-600 text-white flex items-center justify-center">
                                <Icon name="send" size={16} />
                            </button>
                        </div>
                        <p className="text-xs text-slate-500 mt-2">ìë™ ë¶„ë¥˜: êµ¬ë¡€ë©´â†’ì „ë¼ë„ Â· í•˜ë™â†’ê²½ìƒë„ Â· ë¡¯ë°ì›”ë“œâ†’ì„œìš¸</p>
                        {error && <p className="text-sm text-red-500 mt-2">{error}</p>}
                    </form>

                    <div className="mt-6 space-y-4">
                        {currentResult && currentResult.reviews.map((review, idx) => (
                            <article key={idx} className="bg-white border rounded-2xl p-5 shadow-sm">
                                <div className="flex justify-between gap-4">
                                    <div>
                                        <div className="text-xs text-blue-600 font-semibold">{currentResult.place} Â· {currentResult.category}</div>
                                        <h2 className="text-xl font-bold mt-1">{review.title}</h2>
                                    </div>
                                    <button onClick={() => copyToClipboard(review)} className="h-9 px-3 rounded-lg bg-slate-100 hover:bg-slate-200 text-sm inline-flex items-center gap-2">
                                        <Icon name="copy" size={15} />ë³µë¶™
                                    </button>
                                </div>

                                <pre className="mt-4 bg-slate-50 border rounded-xl p-4 text-[15px] leading-relaxed whitespace-pre-wrap font-sans">{composeReviewText(review)}</pre>
                            </article>
                        ))}
                    </div>
                </>
            ) : (
                <div className="space-y-6">
                    <section className="bg-white border rounded-2xl p-5 shadow-sm">
                        <h3 className="font-bold text-lg mb-3">ì´ì „ ê¸°ë¡</h3>
                        {history.length > 0 ? (
                            <div className="space-y-3">
                                {history.map((item) => (
                                    <div key={item.id} className="rounded-xl border p-3 bg-slate-50">
                                        <div className="flex justify-between items-center gap-3">
                                            <div>
                                                <div className="font-semibold">{item.place}</div>
                                                <div className="text-xs text-slate-400">{item.date}</div>
                                            </div>
                                            <div className="flex gap-2">
                                                <button onClick={() => { setCurrentResult(item); setActiveTab("generate"); }} className="px-3 h-8 rounded-lg bg-white border text-sm">ì—´ê¸°</button>
                                                <button onClick={() => setHistory((prev) => prev.filter((h) => h.id !== item.id))} className="px-3 h-8 rounded-lg bg-white border text-sm text-red-500">ì‚­ì œ</button>
                                            </div>
                                        </div>
                                    </div>
                                ))}
                            </div>
                        ) : <p className="text-sm text-slate-400">ê¸°ë¡ ì—†ìŒ</p>}
                    </section>
                </div>
            )}
        </div>
    );
}

const root = ReactDOM.createRoot(document.getElementById("root"));
root.render(<App />);
</script>
</body>
</html>
